import React from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { StandardTable, Column } from '@/components/ui/StandardTable';
import { Download } from 'lucide-react';

interface Distribution {
    id: string;
    date: string;
    doc: string;
    type: string;
    account: string;
    dr: number;
    cr: number;
}

export default function DistributionsViewer() {
    const distributions: Distribution[] = [
        { id: '1', date: '2026-01-12', doc: 'RCT-1004', type: 'Receiving', account: '01-000-1410-0000', dr: 500.00, cr: 0.00 },
        { id: '2', date: '2026-01-12', doc: 'RCT-1004', type: 'Accrual', account: '01-000-2210-0000', dr: 0.00, cr: 500.00 },
        { id: '3', date: '2026-01-13', doc: 'WO-1001', type: 'Material Issue', account: '01-000-1410-0000', dr: 0.00, cr: 10.00 },
        { id: '4', date: '2026-01-13', doc: 'WO-1001', type: 'WIP Charge', account: '01-000-1510-0000', dr: 10.00, cr: 0.00 },
    ];

    const columns: Column<Distribution>[] = [
        { header: "Date", accessorKey: "date" },
        { header: "Document", accessorKey: "doc" },
        { header: "Transaction Type", accessorKey: "type" },
        { header: "GL Account", accessorKey: "account", className: "font-mono text-xs" },
        {
            header: "Debit",
            accessorKey: "dr",
            className: "text-right",
            cell: (row) => row.dr > 0 ? row.dr.toFixed(2) : '-'
        },
        {
            header: "Credit",
            accessorKey: "cr",
            className: "text-right",
            cell: (row) => row.cr > 0 ? row.cr.toFixed(2) : '-'
        }
    ];

    return (
        <div className="space-y-6">
            <div className="flex flex-col gap-2">
                <h1 className="text-3xl font-bold tracking-tight">Cost Distributions</h1>
                <p className="text-muted-foreground">Audit trail of all accounting entries generated by Cost Processor.</p>
            </div>

            <div className="flex justify-end mb-4">
                <Button variant="outline" size="sm"><Download className="mr-2 h-4 w-4" /> Export</Button>
            </div>

            <StandardTable
                data={distributions}
                columns={columns}
                keyExtractor={(item) => item.id}
                filterColumn="doc"
                filterPlaceholder="Search document number..."
            />
        </div>
    );
}
